name: Docker Image CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    # Toma todo el c√≥digo que tiene el repositorio
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    # Hacer login a docker hub
    - name: Docker login
      env:
        DOCKER_USER: ${{secrets.DOCKER_USERNAME}}
        DOCKER_PWD: ${{secrets.DOCKER_PASSWORD}}
      run: |
        echo "Iniciando login"
        echo "${DOCKER_PWD}" | docker login -u "${DOCKER_USER}" --password-stdin
        
    # docker login -u colera -p 
    # echo "${DOCKER_PWD}" | docker login -u "${DOCKER_USER}" --password-stdin
    # Generar la imagen
    # - name: Build Docker image
    #   run: docker build -t ${{ secrets.DOCKER_USERNAME }}/graphql-actions:1.0.0 .
    # Subir imange
    # - name: Push Docker image
    #   run: docker push ${{ secrets.DOCKER_USERNAME }}/graphql-actions:1.0.0
